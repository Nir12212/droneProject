import network, socket

ap = network.WLAN(network.AP_IF)
ap.active(True)
ap.config(essid='ESP32_AP', password='12345678')
print("AP active")

s = socket.socket()
s.bind(('0.0.0.0', 1234))
s.listen(1)
print("Server listening on port 1234")

while True:
    conn, addr = s.accept()
    print("Connection from", addr)
    data = conn.recv(1024)
    print("Received:", data)
    conn.send(b"hello world")
    conn.close()
